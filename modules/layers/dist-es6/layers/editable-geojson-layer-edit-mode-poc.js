"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _keplerOutdatedDeck = require("kepler-outdated-deck.gl-layers");

var _keplerOutdatedNebula = require("kepler-outdated-nebula.gl-edit-modes");

var _editableLayerEditModePoc = _interopRequireDefault(require("./editable-layer-edit-mode-poc.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-env browser */
var DEFAULT_LINE_COLOR = [0x0, 0x0, 0x0, 0xff];
var DEFAULT_FILL_COLOR = [0x0, 0x0, 0x0, 0x90];
var DEFAULT_SELECTED_LINE_COLOR = [0x90, 0x90, 0x90, 0xff];
var DEFAULT_SELECTED_FILL_COLOR = [0x90, 0x90, 0x90, 0x90];
var DEFAULT_EDITING_EXISTING_POINT_COLOR = [0xc0, 0x0, 0x0, 0xff];
var DEFAULT_EDITING_INTERMEDIATE_POINT_COLOR = [0x0, 0x0, 0x0, 0x80];
var DEFAULT_EDITING_SNAP_POINT_COLOR = [0x7c, 0x00, 0xc0, 0xff];
var DEFAULT_EDITING_EXISTING_POINT_RADIUS = 5;
var DEFAULT_EDITING_INTERMEDIATE_POINT_RADIUS = 3;
var DEFAULT_EDITING_SNAP_POINT_RADIUS = 7;
var DEFAULT_EDIT_MODE = new _keplerOutdatedNebula.ViewMode();

function getEditHandleColor(handle) {
  switch (handle.sourceFeature.feature.properties.editHandleType) {
    case 'existing':
      return DEFAULT_EDITING_EXISTING_POINT_COLOR;

    case 'snap':
      return DEFAULT_EDITING_SNAP_POINT_COLOR;

    case 'intermediate':
    default:
      return DEFAULT_EDITING_INTERMEDIATE_POINT_COLOR;
  }
}

function getEditHandleRadius(handle) {
  switch (handle.sourceFeature.feature.properties.editHandleType) {
    case 'existing':
      return DEFAULT_EDITING_EXISTING_POINT_RADIUS;

    case 'snap':
      return DEFAULT_EDITING_SNAP_POINT_RADIUS;

    case 'intermediate':
    default:
      return DEFAULT_EDITING_INTERMEDIATE_POINT_RADIUS;
  }
}

var defaultProps = {
  mode: 'modify',
  // Edit and interaction events
  onEdit: function onEdit() {},
  pickable: true,
  pickingRadius: 10,
  pickingDepth: 5,
  fp64: false,
  filled: true,
  stroked: true,
  lineWidthScale: 1,
  lineWidthMinPixels: 1,
  lineWidthMaxPixels: Number.MAX_SAFE_INTEGER,
  lineWidthUnits: 'meters',
  lineJointRounded: false,
  lineMiterLimit: 4,
  pointRadiusScale: 1,
  pointRadiusMinPixels: 2,
  pointRadiusMaxPixels: Number.MAX_SAFE_INTEGER,
  lineDashJustified: false,
  getLineColor: function getLineColor(feature, isSelected, mode) {
    return isSelected ? DEFAULT_SELECTED_LINE_COLOR : DEFAULT_LINE_COLOR;
  },
  getFillColor: function getFillColor(feature, isSelected, mode) {
    return isSelected ? DEFAULT_SELECTED_FILL_COLOR : DEFAULT_FILL_COLOR;
  },
  getRadius: function getRadius(f) {
    return f && f.properties && f.properties.radius || f && f.properties && f.properties.size || 1;
  },
  getLineWidth: function getLineWidth(f) {
    return f && f.properties && f.properties.lineWidth || 1;
  },
  getLineDashArray: function getLineDashArray(feature, isSelected, mode) {
    return isSelected && mode !== 'view' ? [7, 4] : [0, 0];
  },
  // Tentative feature rendering
  getTentativeLineDashArray: function getTentativeLineDashArray(f, mode) {
    return [7, 4];
  },
  getTentativeLineColor: function getTentativeLineColor(f, mode) {
    return DEFAULT_SELECTED_LINE_COLOR;
  },
  getTentativeFillColor: function getTentativeFillColor(f, mode) {
    return DEFAULT_SELECTED_FILL_COLOR;
  },
  getTentativeLineWidth: function getTentativeLineWidth(f, mode) {
    return f && f.properties && f.properties.lineWidth || 1;
  },
  editHandleType: 'point',
  // point handles
  editHandlePointRadiusScale: 1,
  editHandlePointOutline: false,
  editHandlePointStrokeWidth: 1,
  editHandlePointRadiusMinPixels: 4,
  editHandlePointRadiusMaxPixels: 8,
  getEditHandlePointColor: getEditHandleColor,
  getEditHandlePointRadius: getEditHandleRadius,
  // icon handles
  editHandleIconAtlas: null,
  editHandleIconMapping: null,
  editHandleIconSizeScale: 1,
  getEditHandleIcon: function getEditHandleIcon(handle) {
    return handle.sourceFeature.feature.properties.editHandleType;
  },
  getEditHandleIconSize: 10,
  getEditHandleIconColor: getEditHandleColor,
  getEditHandleIconAngle: 0,
  // misc
  billboard: true,
  // Mode handlers
  modeHandlers: {
    view: new _keplerOutdatedNebula.ViewMode(),
    // Alter modes
    modify: new _keplerOutdatedNebula.ModifyMode(),
    translate: new _keplerOutdatedNebula.SnappableMode(new _keplerOutdatedNebula.TranslateMode()),
    scale: new _keplerOutdatedNebula.ScaleMode(),
    rotate: new _keplerOutdatedNebula.RotateMode(),
    duplicate: new _keplerOutdatedNebula.DuplicateMode(),
    split: new _keplerOutdatedNebula.SplitPolygonMode(),
    extrude: new _keplerOutdatedNebula.ExtrudeMode(),
    elevation: new _keplerOutdatedNebula.ElevationMode(),
    // Draw modes
    drawPoint: new _keplerOutdatedNebula.DrawPointMode(),
    drawLineString: new _keplerOutdatedNebula.DrawLineStringMode(),
    drawPolygon: new _keplerOutdatedNebula.DrawPolygonMode(),
    drawRectangle: new _keplerOutdatedNebula.DrawRectangleMode(),
    drawCircleFromCenter: new _keplerOutdatedNebula.DrawCircleFromCenterMode(),
    drawCircleByBoundingBox: new _keplerOutdatedNebula.DrawCircleByBoundingBoxMode(),
    drawEllipseByBoundingBox: new _keplerOutdatedNebula.DrawEllipseByBoundingBoxMode(),
    drawRectangleUsing3Points: new _keplerOutdatedNebula.DrawRectangleUsingThreePointsMode(),
    drawEllipseUsing3Points: new _keplerOutdatedNebula.DrawEllipseUsingThreePointsMode(),
    draw90DegreePolygon: new _keplerOutdatedNebula.Draw90DegreePolygonMode()
  }
};

// type State = {
//   modeHandler: EditableFeatureCollection,
//   tentativeFeature: ?Feature,
//   editHandles: any[],
//   selectedFeatures: Feature[]
// };
class EditableGeoJsonLayerEditModePoc extends _editableLayerEditModePoc.default {
  // state: State;
  // props: Props;
  // setState: ($Shape<State>) => void;
  renderLayers() {
    var subLayerProps = this.getSubLayerProps({
      id: 'geojson',
      // Proxy most GeoJsonLayer props as-is
      data: this.props.data,
      fp64: this.props.fp64,
      filled: this.props.filled,
      stroked: this.props.stroked,
      lineWidthScale: this.props.lineWidthScale,
      lineWidthMinPixels: this.props.lineWidthMinPixels,
      lineWidthMaxPixels: this.props.lineWidthMaxPixels,
      lineWidthUnits: this.props.lineWidthUnits,
      lineJointRounded: this.props.lineJointRounded,
      lineMiterLimit: this.props.lineMiterLimit,
      pointRadiusScale: this.props.pointRadiusScale,
      pointRadiusMinPixels: this.props.pointRadiusMinPixels,
      pointRadiusMaxPixels: this.props.pointRadiusMaxPixels,
      lineDashJustified: this.props.lineDashJustified,
      getLineColor: this.selectionAwareAccessor(this.props.getLineColor),
      getFillColor: this.selectionAwareAccessor(this.props.getFillColor),
      getRadius: this.selectionAwareAccessor(this.props.getRadius),
      getLineWidth: this.selectionAwareAccessor(this.props.getLineWidth),
      getLineDashArray: this.selectionAwareAccessor(this.props.getLineDashArray),
      _subLayerProps: {
        'line-strings': {
          billboard: this.props.billboard
        },
        'polygons-stroke': {
          billboard: this.props.billboard
        }
      },
      updateTriggers: {
        getLineColor: [this.props.selectedFeatureIndexes, this.props.mode],
        getFillColor: [this.props.selectedFeatureIndexes, this.props.mode],
        getRadius: [this.props.selectedFeatureIndexes, this.props.mode],
        getLineWidth: [this.props.selectedFeatureIndexes, this.props.mode],
        getLineDashArray: [this.props.selectedFeatureIndexes, this.props.mode]
      }
    });
    var layers = [new _keplerOutdatedDeck.GeoJsonLayer(subLayerProps)];
    layers = layers.concat(this.createGuidesLayers());
    return layers;
  }

  initializeState() {
    super.initializeState();
    this.setState({
      selectedFeatures: [],
      editHandles: []
    });
  } // TODO: is this the best way to properly update state from an outside event handler?


  shouldUpdateState(opts) {
    // console.log(
    //   'shouldUpdateState',
    //   opts.changeFlags.propsOrDataChanged,
    //   opts.changeFlags.stateChanged
    // );
    return super.shouldUpdateState(opts) || opts.changeFlags.stateChanged;
  }

  updateState(_ref) {
    var props = _ref.props,
        oldProps = _ref.oldProps,
        changeFlags = _ref.changeFlags;
    super.updateState({
      props: props,
      changeFlags: changeFlags
    });
    var modeHandler = this.state.modeHandler;

    if (changeFlags.propsOrDataChanged) {
      if (props.modeHandlers !== oldProps.modeHandlers || props.mode !== oldProps.mode) {
        modeHandler = props.modeHandlers[props.mode];

        if (!modeHandler) {
          console.warn("No handler configured for mode ".concat(props.mode)); // eslint-disable-line no-console,no-undef
          // Use default mode handler

          modeHandler = DEFAULT_EDIT_MODE;
        }

        if (modeHandler !== this.state.modeHandler) {
          this.setState({
            modeHandler: modeHandler,
            cursor: null
          });
        }
      }
    }

    var selectedFeatures = [];

    if (Array.isArray(props.selectedFeatureIndexes)) {
      // TODO: needs improved testing, i.e. checking for duplicates, NaNs, out of range numbers, ...
      selectedFeatures = props.selectedFeatureIndexes.map(function (elem) {
        return props.data.features[elem];
      });
    }

    this.setState({
      selectedFeatures: selectedFeatures
    });
  }

  getModeProps(props) {
    var _this = this;

    return {
      modeConfig: props.modeConfig,
      data: props.data,
      selectedIndexes: props.selectedFeatureIndexes,
      lastPointerMoveEvent: this.state.lastPointerMoveEvent,
      cursor: this.state.cursor,
      onEdit: function onEdit(editAction) {
        props.onEdit(editAction);
      },
      onUpdateCursor: function onUpdateCursor(cursor) {
        _this.setState({
          cursor: cursor
        });
      }
    };
  }

  selectionAwareAccessor(accessor) {
    var _this2 = this;

    if (typeof accessor !== 'function') {
      return accessor;
    }

    return function (feature) {
      return accessor(feature, _this2.isFeatureSelected(feature), _this2.props.mode);
    };
  }

  isFeatureSelected(feature) {
    if (!this.props.data || !this.props.selectedFeatureIndexes) {
      return false;
    }

    if (!this.props.selectedFeatureIndexes.length) {
      return false;
    }

    var featureIndex = this.props.data.features.indexOf(feature);
    return this.props.selectedFeatureIndexes.includes(featureIndex);
  }

  getPickingInfo(_ref2) {
    var info = _ref2.info,
        sourceLayer = _ref2.sourceLayer;

    if (sourceLayer.id.endsWith('guides')) {
      // If user is picking an editing handle, add additional data to the info
      info.isGuide = true;
    }

    return info;
  }

  createGuidesLayers() {
    var mode = this.props.modeHandlers[this.props.mode] || DEFAULT_EDIT_MODE;
    var guides = mode.getGuides(this.getModeProps(this.props));

    if (!guides || !guides.features.length) {
      return [];
    }

    var pointLayerProps;

    if (this.props.editHandleType === 'icon') {
      pointLayerProps = {
        type: _keplerOutdatedDeck.IconLayer,
        iconAtlas: this.props.editHandleIconAtlas,
        iconMapping: this.props.editHandleIconMapping,
        sizeScale: this.props.editHandleIconSizeScale,
        getIcon: this.props.getEditHandleIcon,
        getSize: this.props.getEditHandleIconSize,
        getColor: this.props.getEditHandleIconColor,
        getAngle: this.props.getEditHandleIconAngle
      };
    } else {
      pointLayerProps = {
        type: _keplerOutdatedDeck.ScatterplotLayer,
        radiusScale: this.props.editHandlePointRadiusScale,
        stroked: this.props.editHandlePointOutline,
        getLineWidth: this.props.editHandlePointStrokeWidth,
        radiusMinPixels: this.props.editHandlePointRadiusMinPixels,
        radiusMaxPixels: this.props.editHandlePointRadiusMaxPixels,
        getRadius: this.props.getEditHandlePointRadius,
        getFillColor: this.props.getEditHandlePointColor,
        getlineColor: this.props.getEditHandlePointColor
      };
    }

    var layer = new _keplerOutdatedDeck.GeoJsonLayer(this.getSubLayerProps({
      id: "guides",
      data: guides,
      fp64: this.props.fp64,
      _subLayerProps: {
        points: pointLayerProps
      },
      lineWidthScale: this.props.lineWidthScale,
      lineWidthMinPixels: this.props.lineWidthMinPixels,
      lineWidthMaxPixels: this.props.lineWidthMaxPixels,
      lineWidthUnits: this.props.lineWidthUnits,
      lineJointRounded: this.props.lineJointRounded,
      lineMiterLimit: this.props.lineMiterLimit,
      getLineColor: this.props.getTentativeLineColor,
      getLineWidth: this.props.getTentativeLineWidth,
      getFillColor: this.props.getTentativeFillColor,
      getLineDashArray: this.props.getTentativeLineDashArray
    }));
    return [layer];
  }

  onLayerClick(event) {
    this.getActiveModeHandler().handleClick(event, this.getModeProps(this.props));
  }

  onStartDragging(event) {
    this.getActiveModeHandler().handleStartDragging(event, this.getModeProps(this.props));
  }

  onStopDragging(event) {
    this.getActiveModeHandler().handleStopDragging(event, this.getModeProps(this.props));
  }

  onPointerMove(event) {
    this.setState({
      lastPointerMoveEvent: event
    });
    this.getActiveModeHandler().handlePointerMove(event, this.getModeProps(this.props));
  }

  getCursor(_ref3) {
    var isDragging = _ref3.isDragging;
    var cursor = this.state.cursor;

    if (!cursor) {
      cursor = isDragging ? 'grabbing' : 'grab';
    }

    return cursor;
  }

  getActiveModeHandler() {
    return this.state.modeHandler;
  }

}

exports.default = EditableGeoJsonLayerEditModePoc;
EditableGeoJsonLayerEditModePoc.layerName = 'EditableGeoJsonLayerEditModePoc';
EditableGeoJsonLayerEditModePoc.defaultProps = defaultProps;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9sYXllcnMvZWRpdGFibGUtZ2VvanNvbi1sYXllci1lZGl0LW1vZGUtcG9jLmpzIl0sIm5hbWVzIjpbIkRFRkFVTFRfTElORV9DT0xPUiIsIkRFRkFVTFRfRklMTF9DT0xPUiIsIkRFRkFVTFRfU0VMRUNURURfTElORV9DT0xPUiIsIkRFRkFVTFRfU0VMRUNURURfRklMTF9DT0xPUiIsIkRFRkFVTFRfRURJVElOR19FWElTVElOR19QT0lOVF9DT0xPUiIsIkRFRkFVTFRfRURJVElOR19JTlRFUk1FRElBVEVfUE9JTlRfQ09MT1IiLCJERUZBVUxUX0VESVRJTkdfU05BUF9QT0lOVF9DT0xPUiIsIkRFRkFVTFRfRURJVElOR19FWElTVElOR19QT0lOVF9SQURJVVMiLCJERUZBVUxUX0VESVRJTkdfSU5URVJNRURJQVRFX1BPSU5UX1JBRElVUyIsIkRFRkFVTFRfRURJVElOR19TTkFQX1BPSU5UX1JBRElVUyIsIkRFRkFVTFRfRURJVF9NT0RFIiwiVmlld01vZGUiLCJnZXRFZGl0SGFuZGxlQ29sb3IiLCJoYW5kbGUiLCJzb3VyY2VGZWF0dXJlIiwiZmVhdHVyZSIsInByb3BlcnRpZXMiLCJlZGl0SGFuZGxlVHlwZSIsImdldEVkaXRIYW5kbGVSYWRpdXMiLCJkZWZhdWx0UHJvcHMiLCJtb2RlIiwib25FZGl0IiwicGlja2FibGUiLCJwaWNraW5nUmFkaXVzIiwicGlja2luZ0RlcHRoIiwiZnA2NCIsImZpbGxlZCIsInN0cm9rZWQiLCJsaW5lV2lkdGhTY2FsZSIsImxpbmVXaWR0aE1pblBpeGVscyIsImxpbmVXaWR0aE1heFBpeGVscyIsIk51bWJlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJsaW5lV2lkdGhVbml0cyIsImxpbmVKb2ludFJvdW5kZWQiLCJsaW5lTWl0ZXJMaW1pdCIsInBvaW50UmFkaXVzU2NhbGUiLCJwb2ludFJhZGl1c01pblBpeGVscyIsInBvaW50UmFkaXVzTWF4UGl4ZWxzIiwibGluZURhc2hKdXN0aWZpZWQiLCJnZXRMaW5lQ29sb3IiLCJpc1NlbGVjdGVkIiwiZ2V0RmlsbENvbG9yIiwiZ2V0UmFkaXVzIiwiZiIsInJhZGl1cyIsInNpemUiLCJnZXRMaW5lV2lkdGgiLCJsaW5lV2lkdGgiLCJnZXRMaW5lRGFzaEFycmF5IiwiZ2V0VGVudGF0aXZlTGluZURhc2hBcnJheSIsImdldFRlbnRhdGl2ZUxpbmVDb2xvciIsImdldFRlbnRhdGl2ZUZpbGxDb2xvciIsImdldFRlbnRhdGl2ZUxpbmVXaWR0aCIsImVkaXRIYW5kbGVQb2ludFJhZGl1c1NjYWxlIiwiZWRpdEhhbmRsZVBvaW50T3V0bGluZSIsImVkaXRIYW5kbGVQb2ludFN0cm9rZVdpZHRoIiwiZWRpdEhhbmRsZVBvaW50UmFkaXVzTWluUGl4ZWxzIiwiZWRpdEhhbmRsZVBvaW50UmFkaXVzTWF4UGl4ZWxzIiwiZ2V0RWRpdEhhbmRsZVBvaW50Q29sb3IiLCJnZXRFZGl0SGFuZGxlUG9pbnRSYWRpdXMiLCJlZGl0SGFuZGxlSWNvbkF0bGFzIiwiZWRpdEhhbmRsZUljb25NYXBwaW5nIiwiZWRpdEhhbmRsZUljb25TaXplU2NhbGUiLCJnZXRFZGl0SGFuZGxlSWNvbiIsImdldEVkaXRIYW5kbGVJY29uU2l6ZSIsImdldEVkaXRIYW5kbGVJY29uQ29sb3IiLCJnZXRFZGl0SGFuZGxlSWNvbkFuZ2xlIiwiYmlsbGJvYXJkIiwibW9kZUhhbmRsZXJzIiwidmlldyIsIm1vZGlmeSIsIk1vZGlmeU1vZGUiLCJ0cmFuc2xhdGUiLCJTbmFwcGFibGVNb2RlIiwiVHJhbnNsYXRlTW9kZSIsInNjYWxlIiwiU2NhbGVNb2RlIiwicm90YXRlIiwiUm90YXRlTW9kZSIsImR1cGxpY2F0ZSIsIkR1cGxpY2F0ZU1vZGUiLCJzcGxpdCIsIlNwbGl0UG9seWdvbk1vZGUiLCJleHRydWRlIiwiRXh0cnVkZU1vZGUiLCJlbGV2YXRpb24iLCJFbGV2YXRpb25Nb2RlIiwiZHJhd1BvaW50IiwiRHJhd1BvaW50TW9kZSIsImRyYXdMaW5lU3RyaW5nIiwiRHJhd0xpbmVTdHJpbmdNb2RlIiwiZHJhd1BvbHlnb24iLCJEcmF3UG9seWdvbk1vZGUiLCJkcmF3UmVjdGFuZ2xlIiwiRHJhd1JlY3RhbmdsZU1vZGUiLCJkcmF3Q2lyY2xlRnJvbUNlbnRlciIsIkRyYXdDaXJjbGVGcm9tQ2VudGVyTW9kZSIsImRyYXdDaXJjbGVCeUJvdW5kaW5nQm94IiwiRHJhd0NpcmNsZUJ5Qm91bmRpbmdCb3hNb2RlIiwiZHJhd0VsbGlwc2VCeUJvdW5kaW5nQm94IiwiRHJhd0VsbGlwc2VCeUJvdW5kaW5nQm94TW9kZSIsImRyYXdSZWN0YW5nbGVVc2luZzNQb2ludHMiLCJEcmF3UmVjdGFuZ2xlVXNpbmdUaHJlZVBvaW50c01vZGUiLCJkcmF3RWxsaXBzZVVzaW5nM1BvaW50cyIsIkRyYXdFbGxpcHNlVXNpbmdUaHJlZVBvaW50c01vZGUiLCJkcmF3OTBEZWdyZWVQb2x5Z29uIiwiRHJhdzkwRGVncmVlUG9seWdvbk1vZGUiLCJFZGl0YWJsZUdlb0pzb25MYXllckVkaXRNb2RlUG9jIiwiRWRpdGFibGVMYXllciIsInJlbmRlckxheWVycyIsInN1YkxheWVyUHJvcHMiLCJnZXRTdWJMYXllclByb3BzIiwiaWQiLCJkYXRhIiwicHJvcHMiLCJzZWxlY3Rpb25Bd2FyZUFjY2Vzc29yIiwiX3N1YkxheWVyUHJvcHMiLCJ1cGRhdGVUcmlnZ2VycyIsInNlbGVjdGVkRmVhdHVyZUluZGV4ZXMiLCJsYXllcnMiLCJHZW9Kc29uTGF5ZXIiLCJjb25jYXQiLCJjcmVhdGVHdWlkZXNMYXllcnMiLCJpbml0aWFsaXplU3RhdGUiLCJzZXRTdGF0ZSIsInNlbGVjdGVkRmVhdHVyZXMiLCJlZGl0SGFuZGxlcyIsInNob3VsZFVwZGF0ZVN0YXRlIiwib3B0cyIsImNoYW5nZUZsYWdzIiwic3RhdGVDaGFuZ2VkIiwidXBkYXRlU3RhdGUiLCJvbGRQcm9wcyIsIm1vZGVIYW5kbGVyIiwic3RhdGUiLCJwcm9wc09yRGF0YUNoYW5nZWQiLCJjb25zb2xlIiwid2FybiIsImN1cnNvciIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsImVsZW0iLCJmZWF0dXJlcyIsImdldE1vZGVQcm9wcyIsIm1vZGVDb25maWciLCJzZWxlY3RlZEluZGV4ZXMiLCJsYXN0UG9pbnRlck1vdmVFdmVudCIsImVkaXRBY3Rpb24iLCJvblVwZGF0ZUN1cnNvciIsImFjY2Vzc29yIiwiaXNGZWF0dXJlU2VsZWN0ZWQiLCJsZW5ndGgiLCJmZWF0dXJlSW5kZXgiLCJpbmRleE9mIiwiaW5jbHVkZXMiLCJnZXRQaWNraW5nSW5mbyIsImluZm8iLCJzb3VyY2VMYXllciIsImVuZHNXaXRoIiwiaXNHdWlkZSIsImd1aWRlcyIsImdldEd1aWRlcyIsInBvaW50TGF5ZXJQcm9wcyIsInR5cGUiLCJJY29uTGF5ZXIiLCJpY29uQXRsYXMiLCJpY29uTWFwcGluZyIsInNpemVTY2FsZSIsImdldEljb24iLCJnZXRTaXplIiwiZ2V0Q29sb3IiLCJnZXRBbmdsZSIsIlNjYXR0ZXJwbG90TGF5ZXIiLCJyYWRpdXNTY2FsZSIsInJhZGl1c01pblBpeGVscyIsInJhZGl1c01heFBpeGVscyIsImdldGxpbmVDb2xvciIsImxheWVyIiwicG9pbnRzIiwib25MYXllckNsaWNrIiwiZXZlbnQiLCJnZXRBY3RpdmVNb2RlSGFuZGxlciIsImhhbmRsZUNsaWNrIiwib25TdGFydERyYWdnaW5nIiwiaGFuZGxlU3RhcnREcmFnZ2luZyIsIm9uU3RvcERyYWdnaW5nIiwiaGFuZGxlU3RvcERyYWdnaW5nIiwib25Qb2ludGVyTW92ZSIsImhhbmRsZVBvaW50ZXJNb3ZlIiwiZ2V0Q3Vyc29yIiwiaXNEcmFnZ2luZyIsImxheWVyTmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUdBOztBQUVBOztBQWdDQTs7OztBQXBDQTtBQXNDQSxJQUFNQSxrQkFBa0IsR0FBRyxDQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsR0FBWCxFQUFnQixJQUFoQixDQUEzQjtBQUNBLElBQU1DLGtCQUFrQixHQUFHLENBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxHQUFYLEVBQWdCLElBQWhCLENBQTNCO0FBQ0EsSUFBTUMs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LEtBQUwsQ0FBV0QsV0FBbEI7QUFDRDs7QUEvT3dFOzs7QUFrUDNFMUIsK0JBQStCLENBQUNxRixTQUFoQyxHQUE0QyxpQ0FBNUM7QUFDQXJGLCtCQUErQixDQUFDekYsWUFBaEMsR0FBK0NBLFlBQS9DIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG5pbXBvcnQgeyBHZW9Kc29uTGF5ZXIsIFNjYXR0ZXJwbG90TGF5ZXIsIEljb25MYXllciB9IGZyb20gJ2tlcGxlci1vdXRkYXRlZC1kZWNrLmdsLWxheWVycyc7XG5cbmltcG9ydCB7XG4gIFZpZXdNb2RlLFxuICBNb2RpZnlNb2RlLFxuICBUcmFuc2xhdGVNb2RlLFxuICBTY2FsZU1vZGUsXG4gIFJvdGF0ZU1vZGUsXG4gIER1cGxpY2F0ZU1vZGUsXG4gIFNwbGl0UG9seWdvbk1vZGUsXG4gIEV4dHJ1ZGVNb2RlLFxuICBFbGV2YXRpb25Nb2RlLFxuICBEcmF3UG9pbnRNb2RlLFxuICBEcmF3TGluZVN0cmluZ01vZGUsXG4gIERyYXdQb2x5Z29uTW9kZSxcbiAgRHJhd1JlY3RhbmdsZU1vZGUsXG4gIERyYXdDaXJjbGVGcm9tQ2VudGVyTW9kZSxcbiAgRHJhd0NpcmNsZUJ5Qm91bmRpbmdCb3hNb2RlLFxuICBEcmF3RWxsaXBzZUJ5Qm91bmRpbmdCb3hNb2RlLFxuICBEcmF3UmVjdGFuZ2xlVXNpbmdUaHJlZVBvaW50c01vZGUsXG4gIERyYXdFbGxpcHNlVXNpbmdUaHJlZVBvaW50c01vZGUsXG4gIERyYXc5MERlZ3JlZVBvbHlnb25Nb2RlLFxuICBTbmFwcGFibGVNb2RlXG59IGZyb20gJ2tlcGxlci1vdXRkYXRlZC1uZWJ1bGEuZ2wtZWRpdC1tb2Rlcyc7XG5cbmltcG9ydCB0eXBlIHtcbiAgRWRpdEFjdGlvbixcbiAgQ2xpY2tFdmVudCxcbiAgU3RhcnREcmFnZ2luZ0V2ZW50LFxuICBTdG9wRHJhZ2dpbmdFdmVudCxcbiAgUG9pbnRlck1vdmVFdmVudCxcbiAgR2VvSnNvbkVkaXRNb2RlLFxuICBGZWF0dXJlQ29sbGVjdGlvblxufSBmcm9tICdrZXBsZXItb3V0ZGF0ZWQtbmVidWxhLmdsLWVkaXQtbW9kZXMnO1xuaW1wb3J0IEVkaXRhYmxlTGF5ZXIgZnJvbSAnLi9lZGl0YWJsZS1sYXllci1lZGl0LW1vZGUtcG9jLmpzJztcblxuY29uc3QgREVGQVVMVF9MSU5FX0NPTE9SID0gWzB4MCwgMHgwLCAweDAsIDB4ZmZdO1xuY29uc3QgREVGQVVMVF9GSUxMX0NPTE9SID0gWzB4MCwgMHgwLCAweDAsIDB4OTBdO1xuY29uc3QgREVGQVVMVF9TRUxFQ1RFRF9MSU5FX0NPTE9SID0gWzB4OTAsIDB4OTAsIDB4OTAsIDB4ZmZdO1xuY29uc3QgREVGQVVMVF9TRUxFQ1RFRF9GSUxMX0NPTE9SID0gWzB4OTAsIDB4OTAsIDB4OTAsIDB4OTBdO1xuY29uc3QgREVGQVVMVF9FRElUSU5HX0VYSVNUSU5HX1BPSU5UX0NPTE9SID0gWzB4YzAsIDB4MCwgMHgwLCAweGZmXTtcbmNvbnN0IERFRkFVTFRfRURJVElOR19JTlRFUk1FRElBVEVfUE9JTlRfQ09MT1IgPSBbMHgwLCAweDAsIDB4MCwgMHg4MF07XG5jb25zdCBERUZBVUxUX0VESVRJTkdfU05BUF9QT0lOVF9DT0xPUiA9IFsweDdjLCAweDAwLCAweGMwLCAweGZmXTtcbmNvbnN0IERFRkFVTFRfRURJVElOR19FWElTVElOR19QT0lOVF9SQURJVVMgPSA1O1xuY29uc3QgREVGQVVMVF9FRElUSU5HX0lOVEVSTUVESUFURV9QT0lOVF9SQURJVVMgPSAzO1xuY29uc3QgREVGQVVMVF9FRElUSU5HX1NOQVBfUE9JTlRfUkFESVVTID0gNztcblxuY29uc3QgREVGQVVMVF9FRElUX01PREUgPSBuZXcgVmlld01vZGUoKTtcblxuZnVuY3Rpb24gZ2V0RWRpdEhhbmRsZUNvbG9yKGhhbmRsZSkge1xuICBzd2l0Y2ggKGhhbmRsZS5zb3VyY2VGZWF0dXJlLmZlYXR1cmUucHJvcGVydGllcy5lZGl0SGFuZGxlVHlwZSkge1xuICAgIGNhc2UgJ2V4aXN0aW5nJzpcbiAgICAgIHJldHVybiBERUZBVUxUX0VESVRJTkdfRVhJU1RJTkdfUE9JTlRfQ09MT1I7XG4gICAgY2FzZSAnc25hcCc6XG4gICAgICByZXR1cm4gREVGQVVMVF9FRElUSU5HX1NOQVBfUE9JTlRfQ09MT1I7XG4gICAgY2FzZSAnaW50ZXJtZWRpYXRlJzpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIERFRkFVTFRfRURJVElOR19JTlRFUk1FRElBVEVfUE9JTlRfQ09MT1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RWRpdEhhbmRsZVJhZGl1cyhoYW5kbGUpIHtcbiAgc3dpdGNoIChoYW5kbGUuc291cmNlRmVhdHVyZS5mZWF0dXJlLnByb3BlcnRpZXMuZWRpdEhhbmRsZVR5cGUpIHtcbiAgICBjYXNlICdleGlzdGluZyc6XG4gICAgICByZXR1cm4gREVGQVVMVF9FRElUSU5HX0VYSVNUSU5HX1BPSU5UX1JBRElVUztcbiAgICBjYXNlICdzbmFwJzpcbiAgICAgIHJldHVybiBERUZBVUxUX0VESVRJTkdfU05BUF9QT0lOVF9SQURJVVM7XG4gICAgY2FzZSAnaW50ZXJtZWRpYXRlJzpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIERFRkFVTFRfRURJVElOR19JTlRFUk1FRElBVEVfUE9JTlRfUkFESVVTO1xuICB9XG59XG5cbmNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcbiAgbW9kZTogJ21vZGlmeScsXG5cbiAgLy8gRWRpdCBhbmQgaW50ZXJhY3Rpb24gZXZlbnRzXG4gIG9uRWRpdDogKCkgPT4ge30sXG5cbiAgcGlja2FibGU6IHRydWUsXG4gIHBpY2tpbmdSYWRpdXM6IDEwLFxuICBwaWNraW5nRGVwdGg6IDUsXG4gIGZwNjQ6IGZhbHNlLFxuICBmaWxsZWQ6IHRydWUsXG4gIHN0cm9rZWQ6IHRydWUsXG4gIGxpbmVXaWR0aFNjYWxlOiAxLFxuICBsaW5lV2lkdGhNaW5QaXhlbHM6IDEsXG4gIGxpbmVXaWR0aE1heFBpeGVsczogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG4gIGxpbmVXaWR0aFVuaXRzOiAnbWV0ZXJzJyxcbiAgbGluZUpvaW50Um91bmRlZDogZmFsc2UsXG4gIGxpbmVNaXRlckxpbWl0OiA0LFxuICBwb2ludFJhZGl1c1NjYWxlOiAxLFxuICBwb2ludFJhZGl1c01pblBpeGVsczogMixcbiAgcG9pbnRSYWRpdXNNYXhQaXhlbHM6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLFxuICBsaW5lRGFzaEp1c3RpZmllZDogZmFsc2UsXG4gIGdldExpbmVDb2xvcjogKGZlYXR1cmUsIGlzU2VsZWN0ZWQsIG1vZGUpID0+XG4gICAgaXNTZWxlY3RlZCA/IERFRkFVTFRfU0VMRUNURURfTElORV9DT0xPUiA6IERFRkFVTFRfTElORV9DT0xPUixcbiAgZ2V0RmlsbENvbG9yOiAoZmVhdHVyZSwgaXNTZWxlY3RlZCwgbW9kZSkgPT5cbiAgICBpc1NlbGVjdGVkID8gREVGQVVMVF9TRUxFQ1RFRF9GSUxMX0NPTE9SIDogREVGQVVMVF9GSUxMX0NPTE9SLFxuICBnZXRSYWRpdXM6IGYgPT5cbiAgICAoZiAmJiBmLnByb3BlcnRpZXMgJiYgZi5wcm9wZXJ0aWVzLnJhZGl1cykgfHwgKGYgJiYgZi5wcm9wZXJ0aWVzICYmIGYucHJvcGVydGllcy5zaXplKSB8fCAxLFxuICBnZXRMaW5lV2lkdGg6IGYgPT4gKGYgJiYgZi5wcm9wZXJ0aWVzICYmIGYucHJvcGVydGllcy5saW5lV2lkdGgpIHx8IDEsXG4gIGdldExpbmVEYXNoQXJyYXk6IChmZWF0dXJlLCBpc1NlbGVjdGVkLCBtb2RlKSA9PlxuICAgIGlzU2VsZWN0ZWQgJiYgbW9kZSAhPT0gJ3ZpZXcnID8gWzcsIDRdIDogWzAsIDBdLFxuXG4gIC8vIFRlbnRhdGl2ZSBmZWF0dXJlIHJlbmRlcmluZ1xuICBnZXRUZW50YXRpdmVMaW5lRGFzaEFycmF5OiAoZiwgbW9kZSkgPT4gWzcsIDRdLFxuICBnZXRUZW50YXRpdmVMaW5lQ29sb3I6IChmLCBtb2RlKSA9PiBERUZBVUxUX1NFTEVDVEVEX0xJTkVfQ09MT1IsXG4gIGdldFRlbnRhdGl2ZUZpbGxDb2xvcjogKGYsIG1vZGUpID0+IERFRkFVTFRfU0VMRUNURURfRklMTF9DT0xPUixcbiAgZ2V0VGVudGF0aXZlTGluZVdpZHRoOiAoZiwgbW9kZSkgPT4gKGYgJiYgZi5wcm9wZXJ0aWVzICYmIGYucHJvcGVydGllcy5saW5lV2lkdGgpIHx8IDEsXG5cbiAgZWRpdEhhbmRsZVR5cGU6ICdwb2ludCcsXG5cbiAgLy8gcG9pbnQgaGFuZGxlc1xuICBlZGl0SGFuZGxlUG9pbnRSYWRpdXNTY2FsZTogMSxcbiAgZWRpdEhhbmRsZVBvaW50T3V0bGluZTogZmFsc2UsXG4gIGVkaXRIYW5kbGVQb2ludFN0cm9rZVdpZHRoOiAxLFxuICBlZGl0SGFuZGxlUG9pbnRSYWRpdXNNaW5QaXhlbHM6IDQsXG4gIGVkaXRIYW5kbGVQb2ludFJhZGl1c01heFBpeGVsczogOCxcbiAgZ2V0RWRpdEhhbmRsZVBvaW50Q29sb3I6IGdldEVkaXRIYW5kbGVDb2xvcixcbiAgZ2V0RWRpdEhhbmRsZVBvaW50UmFkaXVzOiBnZXRFZGl0SGFuZGxlUmFkaXVzLFxuXG4gIC8vIGljb24gaGFuZGxlc1xuICBlZGl0SGFuZGxlSWNvbkF0bGFzOiBudWxsLFxuICBlZGl0SGFuZGxlSWNvbk1hcHBpbmc6IG51bGwsXG4gIGVkaXRIYW5kbGVJY29uU2l6ZVNjYWxlOiAxLFxuICBnZXRFZGl0SGFuZGxlSWNvbjogaGFuZGxlID0+IGhhbmRsZS5zb3VyY2VGZWF0dXJlLmZlYXR1cmUucHJvcGVydGllcy5lZGl0SGFuZGxlVHlwZSxcbiAgZ2V0RWRpdEhhbmRsZUljb25TaXplOiAxMCxcbiAgZ2V0RWRpdEhhbmRsZUljb25Db2xvcjogZ2V0RWRpdEhhbmRsZUNvbG9yLFxuICBnZXRFZGl0SGFuZGxlSWNvbkFuZ2xlOiAwLFxuXG4gIC8vIG1pc2NcbiAgYmlsbGJvYXJkOiB0cnVlLFxuXG4gIC8vIE1vZGUgaGFuZGxlcnNcbiAgbW9kZUhhbmRsZXJzOiB7XG4gICAgdmlldzogbmV3IFZpZXdNb2RlKCksXG5cbiAgICAvLyBBbHRlciBtb2Rlc1xuICAgIG1vZGlmeTogbmV3IE1vZGlmeU1vZGUoKSxcbiAgICB0cmFuc2xhdGU6IG5ldyBTbmFwcGFibGVNb2RlKG5ldyBUcmFuc2xhdGVNb2RlKCkpLFxuICAgIHNjYWxlOiBuZXcgU2NhbGVNb2RlKCksXG4gICAgcm90YXRlOiBuZXcgUm90YXRlTW9kZSgpLFxuICAgIGR1cGxpY2F0ZTogbmV3IER1cGxpY2F0ZU1vZGUoKSxcbiAgICBzcGxpdDogbmV3IFNwbGl0UG9seWdvbk1vZGUoKSxcbiAgICBleHRydWRlOiBuZXcgRXh0cnVkZU1vZGUoKSxcbiAgICBlbGV2YXRpb246IG5ldyBFbGV2YXRpb25Nb2RlKCksXG5cbiAgICAvLyBEcmF3IG1vZGVzXG4gICAgZHJhd1BvaW50OiBuZXcgRHJhd1BvaW50TW9kZSgpLFxuICAgIGRyYXdMaW5lU3RyaW5nOiBuZXcgRHJhd0xpbmVTdHJpbmdNb2RlKCksXG4gICAgZHJhd1BvbHlnb246IG5ldyBEcmF3UG9seWdvbk1vZGUoKSxcbiAgICBkcmF3UmVjdGFuZ2xlOiBuZXcgRHJhd1JlY3RhbmdsZU1vZGUoKSxcbiAgICBkcmF3Q2lyY2xlRnJvbUNlbnRlcjogbmV3IERyYXdDaXJjbGVGcm9tQ2VudGVyTW9kZSgpLFxuICAgIGRyYXdDaXJjbGVCeUJvdW5kaW5nQm94OiBuZXcgRHJhd0NpcmNsZUJ5Qm91bmRpbmdCb3hNb2RlKCksXG4gICAgZHJhd0VsbGlwc2VCeUJvdW5kaW5nQm94OiBuZXcgRHJhd0VsbGlwc2VCeUJvdW5kaW5nQm94TW9kZSgpLFxuICAgIGRyYXdSZWN0YW5nbGVVc2luZzNQb2ludHM6IG5ldyBEcmF3UmVjdGFuZ2xlVXNpbmdUaHJlZVBvaW50c01vZGUoKSxcbiAgICBkcmF3RWxsaXBzZVVzaW5nM1BvaW50czogbmV3IERyYXdFbGxpcHNlVXNpbmdUaHJlZVBvaW50c01vZGUoKSxcbiAgICBkcmF3OTBEZWdyZWVQb2x5Z29uOiBuZXcgRHJhdzkwRGVncmVlUG9seWdvbk1vZGUoKVxuICB9XG59O1xuXG50eXBlIFByb3BzID0ge1xuICBtb2RlOiBzdHJpbmcsXG4gIG1vZGVIYW5kbGVyczogeyBbbW9kZTogc3RyaW5nXTogR2VvSnNvbkVkaXRNb2RlIH0sXG4gIG9uRWRpdDogKEVkaXRBY3Rpb248RmVhdHVyZUNvbGxlY3Rpb24+KSA9PiB2b2lkLFxuICAvLyBUT0RPOiB0eXBlIHRoZSByZXN0XG4gIFtzdHJpbmddOiBhbnlcbn07XG5cbi8vIHR5cGUgU3RhdGUgPSB7XG4vLyAgIG1vZGVIYW5kbGVyOiBFZGl0YWJsZUZlYXR1cmVDb2xsZWN0aW9uLFxuLy8gICB0ZW50YXRpdmVGZWF0dXJlOiA/RmVhdHVyZSxcbi8vICAgZWRpdEhhbmRsZXM6IGFueVtdLFxuLy8gICBzZWxlY3RlZEZlYXR1cmVzOiBGZWF0dXJlW11cbi8vIH07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkaXRhYmxlR2VvSnNvbkxheWVyRWRpdE1vZGVQb2MgZXh0ZW5kcyBFZGl0YWJsZUxheWVyIHtcbiAgLy8gc3RhdGU6IFN0YXRlO1xuICAvLyBwcm9wczogUHJvcHM7XG4gIC8vIHNldFN0YXRlOiAoJFNoYXBlPFN0YXRlPikgPT4gdm9pZDtcblxuICByZW5kZXJMYXllcnMoKSB7XG4gICAgY29uc3Qgc3ViTGF5ZXJQcm9wcyA9IHRoaXMuZ2V0U3ViTGF5ZXJQcm9wcyh7XG4gICAgICBpZDogJ2dlb2pzb24nLFxuXG4gICAgICAvLyBQcm94eSBtb3N0IEdlb0pzb25MYXllciBwcm9wcyBhcy1pc1xuICAgICAgZGF0YTogdGhpcy5wcm9wcy5kYXRhLFxuICAgICAgZnA2NDogdGhpcy5wcm9wcy5mcDY0LFxuICAgICAgZmlsbGVkOiB0aGlzLnByb3BzLmZpbGxlZCxcbiAgICAgIHN0cm9rZWQ6IHRoaXMucHJvcHMuc3Ryb2tlZCxcbiAgICAgIGxpbmVXaWR0aFNjYWxlOiB0aGlzLnByb3BzLmxpbmVXaWR0aFNjYWxlLFxuICAgICAgbGluZVdpZHRoTWluUGl4ZWxzOiB0aGlzLnByb3BzLmxpbmVXaWR0aE1pblBpeGVscyxcbiAgICAgIGxpbmVXaWR0aE1heFBpeGVsczogdGhpcy5wcm9wcy5saW5lV2lkdGhNYXhQaXhlbHMsXG4gICAgICBsaW5lV2lkdGhVbml0czogdGhpcy5wcm9wcy5saW5lV2lkdGhVbml0cyxcbiAgICAgIGxpbmVKb2ludFJvdW5kZWQ6IHRoaXMucHJvcHMubGluZUpvaW50Um91bmRlZCxcbiAgICAgIGxpbmVNaXRlckxpbWl0OiB0aGlzLnByb3BzLmxpbmVNaXRlckxpbWl0LFxuICAgICAgcG9pbnRSYWRpdXNTY2FsZTogdGhpcy5wcm9wcy5wb2ludFJhZGl1c1NjYWxlLFxuICAgICAgcG9pbnRSYWRpdXNNaW5QaXhlbHM6IHRoaXMucHJvcHMucG9pbnRSYWRpdXNNaW5QaXhlbHMsXG4gICAgICBwb2ludFJhZGl1c01heFBpeGVsczogdGhpcy5wcm9wcy5wb2ludFJhZGl1c01heFBpeGVscyxcbiAgICAgIGxpbmVEYXNoSnVzdGlmaWVkOiB0aGlzLnByb3BzLmxpbmVEYXNoSnVzdGlmaWVkLFxuICAgICAgZ2V0TGluZUNvbG9yOiB0aGlzLnNlbGVjdGlvbkF3YXJlQWNjZXNzb3IodGhpcy5wcm9wcy5nZXRMaW5lQ29sb3IpLFxuICAgICAgZ2V0RmlsbENvbG9yOiB0aGlzLnNlbGVjdGlvbkF3YXJlQWNjZXNzb3IodGhpcy5wcm9wcy5nZXRGaWxsQ29sb3IpLFxuICAgICAgZ2V0UmFkaXVzOiB0aGlzLnNlbGVjdGlvbkF3YXJlQWNjZXNzb3IodGhpcy5wcm9wcy5nZXRSYWRpdXMpLFxuICAgICAgZ2V0TGluZVdpZHRoOiB0aGlzLnNlbGVjdGlvbkF3YXJlQWNjZXNzb3IodGhpcy5wcm9wcy5nZXRMaW5lV2lkdGgpLFxuICAgICAgZ2V0TGluZURhc2hBcnJheTogdGhpcy5zZWxlY3Rpb25Bd2FyZUFjY2Vzc29yKHRoaXMucHJvcHMuZ2V0TGluZURhc2hBcnJheSksXG5cbiAgICAgIF9zdWJMYXllclByb3BzOiB7XG4gICAgICAgICdsaW5lLXN0cmluZ3MnOiB7XG4gICAgICAgICAgYmlsbGJvYXJkOiB0aGlzLnByb3BzLmJpbGxib2FyZFxuICAgICAgICB9LFxuICAgICAgICAncG9seWdvbnMtc3Ryb2tlJzoge1xuICAgICAgICAgIGJpbGxib2FyZDogdGhpcy5wcm9wcy5iaWxsYm9hcmRcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgdXBkYXRlVHJpZ2dlcnM6IHtcbiAgICAgICAgZ2V0TGluZUNvbG9yOiBbdGhpcy5wcm9wcy5zZWxlY3RlZEZlYXR1cmVJbmRleGVzLCB0aGlzLnByb3BzLm1vZGVdLFxuICAgICAgICBnZXRGaWxsQ29sb3I6IFt0aGlzLnByb3BzLnNlbGVjdGVkRmVhdHVyZUluZGV4ZXMsIHRoaXMucHJvcHMubW9kZV0sXG4gICAgICAgIGdldFJhZGl1czogW3RoaXMucHJvcHMuc2VsZWN0ZWRGZWF0dXJlSW5kZXhlcywgdGhpcy5wcm9wcy5tb2RlXSxcbiAgICAgICAgZ2V0TGluZVdpZHRoOiBbdGhpcy5wcm9wcy5zZWxlY3RlZEZlYXR1cmVJbmRleGVzLCB0aGlzLnByb3BzLm1vZGVdLFxuICAgICAgICBnZXRMaW5lRGFzaEFycmF5OiBbdGhpcy5wcm9wcy5zZWxlY3RlZEZlYXR1cmVJbmRleGVzLCB0aGlzLnByb3BzLm1vZGVdXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsZXQgbGF5ZXJzOiBhbnkgPSBbbmV3IEdlb0pzb25MYXllcihzdWJMYXllclByb3BzKV07XG5cbiAgICBsYXllcnMgPSBsYXllcnMuY29uY2F0KHRoaXMuY3JlYXRlR3VpZGVzTGF5ZXJzKCkpO1xuXG4gICAgcmV0dXJuIGxheWVycztcbiAgfVxuXG4gIGluaXRpYWxpemVTdGF0ZSgpIHtcbiAgICBzdXBlci5pbml0aWFsaXplU3RhdGUoKTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2VsZWN0ZWRGZWF0dXJlczogW10sXG4gICAgICBlZGl0SGFuZGxlczogW11cbiAgICB9KTtcbiAgfVxuXG4gIC8vIFRPRE86IGlzIHRoaXMgdGhlIGJlc3Qgd2F5IHRvIHByb3Blcmx5IHVwZGF0ZSBzdGF0ZSBmcm9tIGFuIG91dHNpZGUgZXZlbnQgaGFuZGxlcj9cbiAgc2hvdWxkVXBkYXRlU3RhdGUob3B0czogYW55KSB7XG4gICAgLy8gY29uc29sZS5sb2coXG4gICAgLy8gICAnc2hvdWxkVXBkYXRlU3RhdGUnLFxuICAgIC8vICAgb3B0cy5jaGFuZ2VGbGFncy5wcm9wc09yRGF0YUNoYW5nZWQsXG4gICAgLy8gICBvcHRzLmNoYW5nZUZsYWdzLnN0YXRlQ2hhbmdlZFxuICAgIC8vICk7XG4gICAgcmV0dXJuIHN1cGVyLnNob3VsZFVwZGF0ZVN0YXRlKG9wdHMpIHx8IG9wdHMuY2hhbmdlRmxhZ3Muc3RhdGVDaGFuZ2VkO1xuICB9XG5cbiAgdXBkYXRlU3RhdGUoe1xuICAgIHByb3BzLFxuICAgIG9sZFByb3BzLFxuICAgIGNoYW5nZUZsYWdzXG4gIH06IHtcbiAgICBwcm9wczogUHJvcHMsXG4gICAgb2xkUHJvcHM6IFByb3BzLFxuICAgIGNoYW5nZUZsYWdzOiBhbnlcbiAgfSkge1xuICAgIHN1cGVyLnVwZGF0ZVN0YXRlKHsgcHJvcHMsIGNoYW5nZUZsYWdzIH0pO1xuXG4gICAgbGV0IG1vZGVIYW5kbGVyOiBHZW9Kc29uRWRpdE1vZGUgPSB0aGlzLnN0YXRlLm1vZGVIYW5kbGVyO1xuICAgIGlmIChjaGFuZ2VGbGFncy5wcm9wc09yRGF0YUNoYW5nZWQpIHtcbiAgICAgIGlmIChwcm9wcy5tb2RlSGFuZGxlcnMgIT09IG9sZFByb3BzLm1vZGVIYW5kbGVycyB8fCBwcm9wcy5tb2RlICE9PSBvbGRQcm9wcy5tb2RlKSB7XG4gICAgICAgIG1vZGVIYW5kbGVyID0gcHJvcHMubW9kZUhhbmRsZXJzW3Byb3BzLm1vZGVdO1xuXG4gICAgICAgIGlmICghbW9kZUhhbmRsZXIpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYE5vIGhhbmRsZXIgY29uZmlndXJlZCBmb3IgbW9kZSAke3Byb3BzLm1vZGV9YCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZSxuby11bmRlZlxuICAgICAgICAgIC8vIFVzZSBkZWZhdWx0IG1vZGUgaGFuZGxlclxuICAgICAgICAgIG1vZGVIYW5kbGVyID0gREVGQVVMVF9FRElUX01PREU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobW9kZUhhbmRsZXIgIT09IHRoaXMuc3RhdGUubW9kZUhhbmRsZXIpIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgbW9kZUhhbmRsZXIsIGN1cnNvcjogbnVsbCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBzZWxlY3RlZEZlYXR1cmVzID0gW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcHMuc2VsZWN0ZWRGZWF0dXJlSW5kZXhlcykpIHtcbiAgICAgIC8vIFRPRE86IG5lZWRzIGltcHJvdmVkIHRlc3RpbmcsIGkuZS4gY2hlY2tpbmcgZm9yIGR1cGxpY2F0ZXMsIE5hTnMsIG91dCBvZiByYW5nZSBudW1iZXJzLCAuLi5cbiAgICAgIHNlbGVjdGVkRmVhdHVyZXMgPSBwcm9wcy5zZWxlY3RlZEZlYXR1cmVJbmRleGVzLm1hcChlbGVtID0+IHByb3BzLmRhdGEuZmVhdHVyZXNbZWxlbV0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZEZlYXR1cmVzIH0pO1xuICB9XG5cbiAgZ2V0TW9kZVByb3BzKHByb3BzOiBQcm9wcykge1xuICAgIHJldHVybiB7XG4gICAgICBtb2RlQ29uZmlnOiBwcm9wcy5tb2RlQ29uZmlnLFxuICAgICAgZGF0YTogcHJvcHMuZGF0YSxcbiAgICAgIHNlbGVjdGVkSW5kZXhlczogcHJvcHMuc2VsZWN0ZWRGZWF0dXJlSW5kZXhlcyxcbiAgICAgIGxhc3RQb2ludGVyTW92ZUV2ZW50OiB0aGlzLnN0YXRlLmxhc3RQb2ludGVyTW92ZUV2ZW50LFxuICAgICAgY3Vyc29yOiB0aGlzLnN0YXRlLmN1cnNvcixcbiAgICAgIG9uRWRpdDogKGVkaXRBY3Rpb246IEVkaXRBY3Rpb248RmVhdHVyZUNvbGxlY3Rpb24+KSA9PiB7XG4gICAgICAgIHByb3BzLm9uRWRpdChlZGl0QWN0aW9uKTtcbiAgICAgIH0sXG4gICAgICBvblVwZGF0ZUN1cnNvcjogKGN1cnNvcjogP3N0cmluZykgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgY3Vyc29yIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBzZWxlY3Rpb25Bd2FyZUFjY2Vzc29yKGFjY2Vzc29yOiBhbnkpIHtcbiAgICBpZiAodHlwZW9mIGFjY2Vzc29yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gYWNjZXNzb3I7XG4gICAgfVxuICAgIHJldHVybiAoZmVhdHVyZTogT2JqZWN0KSA9PiBhY2Nlc3NvcihmZWF0dXJlLCB0aGlzLmlzRmVhdHVyZVNlbGVjdGVkKGZlYXR1cmUpLCB0aGlzLnByb3BzLm1vZGUpO1xuICB9XG5cbiAgaXNGZWF0dXJlU2VsZWN0ZWQoZmVhdHVyZTogT2JqZWN0KSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmRhdGEgfHwgIXRoaXMucHJvcHMuc2VsZWN0ZWRGZWF0dXJlSW5kZXhlcykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMucHJvcHMuc2VsZWN0ZWRGZWF0dXJlSW5kZXhlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgZmVhdHVyZUluZGV4ID0gdGhpcy5wcm9wcy5kYXRhLmZlYXR1cmVzLmluZGV4T2YoZmVhdHVyZSk7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuc2VsZWN0ZWRGZWF0dXJlSW5kZXhlcy5pbmNsdWRlcyhmZWF0dXJlSW5kZXgpO1xuICB9XG5cbiAgZ2V0UGlja2luZ0luZm8oeyBpbmZvLCBzb3VyY2VMYXllciB9OiBPYmplY3QpIHtcbiAgICBpZiAoc291cmNlTGF5ZXIuaWQuZW5kc1dpdGgoJ2d1aWRlcycpKSB7XG4gICAgICAvLyBJZiB1c2VyIGlzIHBpY2tpbmcgYW4gZWRpdGluZyBoYW5kbGUsIGFkZCBhZGRpdGlvbmFsIGRhdGEgdG8gdGhlIGluZm9cbiAgICAgIGluZm8uaXNHdWlkZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZm87XG4gIH1cblxuICBjcmVhdGVHdWlkZXNMYXllcnMoKSB7XG4gICAgY29uc3QgbW9kZSA9IHRoaXMucHJvcHMubW9kZUhhbmRsZXJzW3RoaXMucHJvcHMubW9kZV0gfHwgREVGQVVMVF9FRElUX01PREU7XG4gICAgY29uc3QgZ3VpZGVzOiBGZWF0dXJlQ29sbGVjdGlvbiA9IG1vZGUuZ2V0R3VpZGVzKHRoaXMuZ2V0TW9kZVByb3BzKHRoaXMucHJvcHMpKTtcblxuICAgIGlmICghZ3VpZGVzIHx8ICFndWlkZXMuZmVhdHVyZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgbGV0IHBvaW50TGF5ZXJQcm9wcztcbiAgICBpZiAodGhpcy5wcm9wcy5lZGl0SGFuZGxlVHlwZSA9PT0gJ2ljb24nKSB7XG4gICAgICBwb2ludExheWVyUHJvcHMgPSB7XG4gICAgICAgIHR5cGU6IEljb25MYXllcixcbiAgICAgICAgaWNvbkF0bGFzOiB0aGlzLnByb3BzLmVkaXRIYW5kbGVJY29uQXRsYXMsXG4gICAgICAgIGljb25NYXBwaW5nOiB0aGlzLnByb3BzLmVkaXRIYW5kbGVJY29uTWFwcGluZyxcbiAgICAgICAgc2l6ZVNjYWxlOiB0aGlzLnByb3BzLmVkaXRIYW5kbGVJY29uU2l6ZVNjYWxlLFxuICAgICAgICBnZXRJY29uOiB0aGlzLnByb3BzLmdldEVkaXRIYW5kbGVJY29uLFxuICAgICAgICBnZXRTaXplOiB0aGlzLnByb3BzLmdldEVkaXRIYW5kbGVJY29uU2l6ZSxcbiAgICAgICAgZ2V0Q29sb3I6IHRoaXMucHJvcHMuZ2V0RWRpdEhhbmRsZUljb25Db2xvcixcbiAgICAgICAgZ2V0QW5nbGU6IHRoaXMucHJvcHMuZ2V0RWRpdEhhbmRsZUljb25BbmdsZVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9pbnRMYXllclByb3BzID0ge1xuICAgICAgICB0eXBlOiBTY2F0dGVycGxvdExheWVyLFxuICAgICAgICByYWRpdXNTY2FsZTogdGhpcy5wcm9wcy5lZGl0SGFuZGxlUG9pbnRSYWRpdXNTY2FsZSxcbiAgICAgICAgc3Ryb2tlZDogdGhpcy5wcm9wcy5lZGl0SGFuZGxlUG9pbnRPdXRsaW5lLFxuICAgICAgICBnZXRMaW5lV2lkdGg6IHRoaXMucHJvcHMuZWRpdEhhbmRsZVBvaW50U3Ryb2tlV2lkdGgsXG4gICAgICAgIHJhZGl1c01pblBpeGVsczogdGhpcy5wcm9wcy5lZGl0SGFuZGxlUG9pbnRSYWRpdXNNaW5QaXhlbHMsXG4gICAgICAgIHJhZGl1c01heFBpeGVsczogdGhpcy5wcm9wcy5lZGl0SGFuZGxlUG9pbnRSYWRpdXNNYXhQaXhlbHMsXG4gICAgICAgIGdldFJhZGl1czogdGhpcy5wcm9wcy5nZXRFZGl0SGFuZGxlUG9pbnRSYWRpdXMsXG4gICAgICAgIGdldEZpbGxDb2xvcjogdGhpcy5wcm9wcy5nZXRFZGl0SGFuZGxlUG9pbnRDb2xvcixcbiAgICAgICAgZ2V0bGluZUNvbG9yOiB0aGlzLnByb3BzLmdldEVkaXRIYW5kbGVQb2ludENvbG9yXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGxheWVyID0gbmV3IEdlb0pzb25MYXllcihcbiAgICAgIHRoaXMuZ2V0U3ViTGF5ZXJQcm9wcyh7XG4gICAgICAgIGlkOiBgZ3VpZGVzYCxcbiAgICAgICAgZGF0YTogZ3VpZGVzLFxuICAgICAgICBmcDY0OiB0aGlzLnByb3BzLmZwNjQsXG4gICAgICAgIF9zdWJMYXllclByb3BzOiB7XG4gICAgICAgICAgcG9pbnRzOiBwb2ludExheWVyUHJvcHNcbiAgICAgICAgfSxcbiAgICAgICAgbGluZVdpZHRoU2NhbGU6IHRoaXMucHJvcHMubGluZVdpZHRoU2NhbGUsXG4gICAgICAgIGxpbmVXaWR0aE1pblBpeGVsczogdGhpcy5wcm9wcy5saW5lV2lkdGhNaW5QaXhlbHMsXG4gICAgICAgIGxpbmVXaWR0aE1heFBpeGVsczogdGhpcy5wcm9wcy5saW5lV2lkdGhNYXhQaXhlbHMsXG4gICAgICAgIGxpbmVXaWR0aFVuaXRzOiB0aGlzLnByb3BzLmxpbmVXaWR0aFVuaXRzLFxuICAgICAgICBsaW5lSm9pbnRSb3VuZGVkOiB0aGlzLnByb3BzLmxpbmVKb2ludFJvdW5kZWQsXG4gICAgICAgIGxpbmVNaXRlckxpbWl0OiB0aGlzLnByb3BzLmxpbmVNaXRlckxpbWl0LFxuICAgICAgICBnZXRMaW5lQ29sb3I6IHRoaXMucHJvcHMuZ2V0VGVudGF0aXZlTGluZUNvbG9yLFxuICAgICAgICBnZXRMaW5lV2lkdGg6IHRoaXMucHJvcHMuZ2V0VGVudGF0aXZlTGluZVdpZHRoLFxuICAgICAgICBnZXRGaWxsQ29sb3I6IHRoaXMucHJvcHMuZ2V0VGVudGF0aXZlRmlsbENvbG9yLFxuICAgICAgICBnZXRMaW5lRGFzaEFycmF5OiB0aGlzLnByb3BzLmdldFRlbnRhdGl2ZUxpbmVEYXNoQXJyYXlcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIHJldHVybiBbbGF5ZXJdO1xuICB9XG5cbiAgb25MYXllckNsaWNrKGV2ZW50OiBDbGlja0V2ZW50KSB7XG4gICAgdGhpcy5nZXRBY3RpdmVNb2RlSGFuZGxlcigpLmhhbmRsZUNsaWNrKGV2ZW50LCB0aGlzLmdldE1vZGVQcm9wcyh0aGlzLnByb3BzKSk7XG4gIH1cblxuICBvblN0YXJ0RHJhZ2dpbmcoZXZlbnQ6IFN0YXJ0RHJhZ2dpbmdFdmVudCkge1xuICAgIHRoaXMuZ2V0QWN0aXZlTW9kZUhhbmRsZXIoKS5oYW5kbGVTdGFydERyYWdnaW5nKGV2ZW50LCB0aGlzLmdldE1vZGVQcm9wcyh0aGlzLnByb3BzKSk7XG4gIH1cblxuICBvblN0b3BEcmFnZ2luZyhldmVudDogU3RvcERyYWdnaW5nRXZlbnQpIHtcbiAgICB0aGlzLmdldEFjdGl2ZU1vZGVIYW5kbGVyKCkuaGFuZGxlU3RvcERyYWdnaW5nKGV2ZW50LCB0aGlzLmdldE1vZGVQcm9wcyh0aGlzLnByb3BzKSk7XG4gIH1cblxuICBvblBvaW50ZXJNb3ZlKGV2ZW50OiBQb2ludGVyTW92ZUV2ZW50KSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGxhc3RQb2ludGVyTW92ZUV2ZW50OiBldmVudCB9KTtcbiAgICB0aGlzLmdldEFjdGl2ZU1vZGVIYW5kbGVyKCkuaGFuZGxlUG9pbnRlck1vdmUoZXZlbnQsIHRoaXMuZ2V0TW9kZVByb3BzKHRoaXMucHJvcHMpKTtcbiAgfVxuXG4gIGdldEN1cnNvcih7IGlzRHJhZ2dpbmcgfTogeyBpc0RyYWdnaW5nOiBib29sZWFuIH0pIHtcbiAgICBsZXQgeyBjdXJzb3IgfSA9IHRoaXMuc3RhdGU7XG4gICAgaWYgKCFjdXJzb3IpIHtcbiAgICAgIGN1cnNvciA9IGlzRHJhZ2dpbmcgPyAnZ3JhYmJpbmcnIDogJ2dyYWInO1xuICAgIH1cbiAgICByZXR1cm4gY3Vyc29yO1xuICB9XG5cbiAgZ2V0QWN0aXZlTW9kZUhhbmRsZXIoKTogR2VvSnNvbkVkaXRNb2RlIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5tb2RlSGFuZGxlcjtcbiAgfVxufVxuXG5FZGl0YWJsZUdlb0pzb25MYXllckVkaXRNb2RlUG9jLmxheWVyTmFtZSA9ICdFZGl0YWJsZUdlb0pzb25MYXllckVkaXRNb2RlUG9jJztcbkVkaXRhYmxlR2VvSnNvbkxheWVyRWRpdE1vZGVQb2MuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuIl19